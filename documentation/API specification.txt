openapi: "3.0.0"
info:
  version: "0.0.1"
  title: Data Utility Resolution Engine
  description: The goal of the component consists in filtering bluprints and raking them, based on the application developer requirements. Source code in [github](https://github.com/DITAS-Project/data-utility-resolution-engine)
  license:
    name: License TBD
    url: https://www.apache.org/licenses/LICENSE-2.0.html
servers:
  - url: http://petstore.swagger.io/api
paths:
  /filterBlueprints:
    post:
      summary: "notifyViolation"
      description: "The only API of this method filters a list of blueprints (input) that are not complaint with the application requirements (input), and rank them."
      requestBody:
        description: "Application requirements and list of VDC blueprints. Both imput marged in the same body because at most 1 body parameter can be defined. [Click here for more info](https://github.com/swagger-api/swagger-editor/issues/889)"
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/input"
              
      responses:
        405:
          description: "Invalid input"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        200:
          description: "Valid input"

          
components:
  schemas:
    applicationRequirements:
      properties:
        name:
          type: string
        tag:
          type: string   


    violation:
      properties:
        type:
          type: "string"
          description: "the agreement id"
        agreementid: 
          type: "integer"
        guaranteename: 
          type: "string"
          description: "the slo name"
        date: 
          type: "string"
          description: "date when the violation was detected"
        metric:        
          type: "string"
          description: "the metric name"
        value:  
          type: "number"
          description: "violation value"
          
    input:
      properties:
        violations:
          type: "array"
          items: 
            $ref: "#components/schemas/violation"
        applicationRequirements:
          $ref: "#components/schemas/applicationRequirements"
          
    Error:
      required:
        - code
        - message
      properties:
        code:
          type: integer
          format: int32
        message:
          type: string
